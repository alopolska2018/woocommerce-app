{% extends 'woocommerce/baseUser.html' %}
{% load staticfiles %}
{% block content %}
<div class="" id="wrapper">

<div class="content">
  <div class="row">
      <div class="col-lg-12">
          <div class="hpanel">
              <div class="panel-heading">
                  <div class="panel-tools">

                  </div>
                  Basic elements
              </div>
              <div class="panel-body">
              <form action="{%url 'woocommerceApp:schedule' %}" method="post" class="form-horizontal">
                {% csrf_token %}

                <div class="col-lg-6">
                  <div class="form-group"><label class="col-sm-2 control-label" for="{{schedule_form.id_for_label}}">AliExpress Key</label>
                    <span>{{schedule_form.AliExpress_key.errors}}</span>

                  <div class="col-sm-10">{{ schedule_form.AliExpress_key}}</div>
              </div>
              <div class="hr-line-dashed"></div>
              <div class="form-group"><label class="col-sm-2 control-label">AliExpress Id</label>
                <span>{{schedule_form.AliExpress_Id.errors}}</span>

                  <div class="col-sm-10">{{ schedule_form.AliExpress_Id}}</div>
              </div>
              <div class="hr-line-dashed"></div>
              <div class="form-group"><label class="col-sm-2 control-label">Keywords</label>
                <span>{{schedule_form.AliExpress_keywords.errors}}</span>

                  <div class="col-sm-10">{{ schedule_form.AliExpress_keywords}}</div>
              </div>
              <div class="form-group"><label class="col-sm-2 control-label">Language</label>
                <span>{{schedule_form.AliExpress_language.errors}}</span>

                  <div class="col-sm-10">{{ schedule_form.AliExpress_language}}</div>
              </div>
              <div class="form-group"><label class="col-sm-2 control-label">High Quality</label>
                <span>{{schedule_form.AliExpress_highquality.errors}}</span>

                  <div class="col-sm-10">{{ schedule_form.AliExpress_highquality}}</div>
              </div>

              </div>
              <div class="col-lg-6">
              <div class="form-group"><label class="col-sm-2 control-label">Woocommerce Site Url</label>
                <span>{{schedule_form.woocommerce_url.errors}}</span>

                    <div class="col-sm-10">{{ schedule_form.woocommerce_url}}</div>
              </div>
              <div class="hr-line-dashed"></div>
              <div class="form-group"><label class="col-sm-3 control-label">Consumer Key</label>
                <span>{{schedule_form.woocommerce_consumer_key.errors}}</span>

                  <div class="col-sm-9">{{ schedule_form.woocommerce_consumer_key}}</div>
              </div>
              <div class="hr-line-dashed"></div>
              <div class="form-group"><label class="col-sm-3 control-label">Secret key</label>
                <span>{{schedule_form.woocommerce_secret_key.errors}}</span>

                  <div class="col-sm-9">{{ schedule_form.woocommerce_secret_key}}</div>
              </div>
              <div class="hr-line-dashed"></div>
              <div class="form-group"><label class="col-sm-2 control-label">Categories</label>
                <span>{{schedule_form.AliExpress_category.errors}}</span>

                  <div class="col-sm-10">{{ schedule_form.AliExpress_category}}</div>
              </div>
              <div class="form-group"><label class="col-sm-2 control-label">Currency</label>
                  <span>{{schedule_form.AliExpress_Currency.errors}}</span>
                  <div class="col-sm-10">{{ schedule_form.AliExpress_Currency}}</div>
              </div>
              <div class="form-group"><label class="col-sm-2 control-label">Increment</label>
                <span>{{schedule_form.AliExpress_Increment.errors}}</span>

                  <div class="col-sm-10">{{ schedule_form.AliExpress_Increment}}</div>
              </div>
              <div class="form-group">
                  <div class="col-sm-8 col-sm-offset-2">
                      <button class="btn btn-default" type="submit">Cancel</button>
                      <button class="btn btn-primary" type="submit">Save changes</button>
                  </div>
              </div>
              </div>
              </form>

              </div>
          </div>


      </div>

  </div>
  {% if scrap_done %}

  <div class="row">
      <div class="col-lg-12">
          <div class="hpanel">
              <div class="panel-heading">
                  Results

              </div>
              <div class="panel-body">

                  <table id="example1" class="table table-striped table-bordered table-hover" width="100%">
                      <thead>
                      <tr>
                          <th>Name</th>
                          <th>Position</th>
                          <th>Office</th>
                          <th width="15%">Age</th>
                          <th width="15%">Start date</th>
                          <th width="15%">Salary</th>
                      </tr>
                      </thead>
                      <tfoot>
                        <th>Name</th>
                        <th>Position</th>
                        <th>Office</th>
                        <th width="15%">Age</th>
                        <th width="15%">Start date</th>
                        <th width="15%">Salary</th>
                      </tfoot>
                  </table>
                  <div class="row">

                  </div>
                        <a href="{%url 'woocommerceApp:generate' schedule %}">
                        <button class="btn btn-primary" type="submit" >Generate CSV file</button>
                        </a>
                        <a href="{%url 'woocommerceApp:post' schedule %}">
                        <button class="btn btn-success" type="submit" >Post data to your website</button>
                        </a>
                    </a>


              </div>
          </div>


      </div>

  </div>
  </div>
  {%endif%}

</div>
{% endblock %}
{% block scripts %}
<script src="{% static 'template/vendor/datatables/media/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'template/vendor/datatables.net-bs/js/dataTables.bootstrap.min.js' %}"></script>
<!-- DataTables buttons scripts -->
<script src="{% static 'template/vendor/pdfmake/build/pdfmake.min.js' %}"></script>
<script src="{% static 'template/vendor/pdfmake/build/vfs_fonts.js' %}"></script>
<script src="{% static 'template/vendor/datatables.net-buttons/js/buttons.html5.min.js' %}"></script>
<script src="{% static 'template/vendor/datatables.net-buttons/js/buttons.print.min.js' %}"></script>
<script src="{% static 'template/vendor/datatables.net-buttons/js/dataTables.buttons.min.js' %}"></script>
<script src="{% static 'template/vendor/datatables.net-buttons-bs/js/buttons.bootstrap.min.js' %}"></script>
{% if scrap_done %}
<script>

  $(document).ready(function() {
    $('#example1').DataTable( {
        "processing": true,
        "ajax" :{
           "url":"{{response.url}}",
           "dataSrc": function(json){
             return json['result']['products']
           }
         },
        "columns": [
            { "data": "productId" },
            { "data": "productTitle" },
            { "data": "productUrl" },
            { "data": "originalPrice" },
            { "data": "salePrice" },
            { "data": "imageUrl" }
        ]
      } );
} );

  function csv_req(){
    $.ajax({
      type: "POST",
      url: "{%url 'woocommerceApp:download' schedule %}",
      dataType : "csv",
      data: {'link':"{{response.path}}",
              'id' : "{{schedule}}"
            },
      success : function(result){
        console.log(response);
      },

      error : function(error){
        console.log(error);
      }

    })
  }
</script>
{%endif%}
{% endblock %}
